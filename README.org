#+title: Subscribe

* What it does?

If you manage mailing lists through [[https://www.mailgun.com/][mailgun.com]], =Subscribe= creates
webpages where users can (un)subscribe (from)to your mailing lists.

* Configure

1. Set =SUBSCRIBE_CONFIG= in your =~/.profile= file to the path of your
   configuration file.

2. Add a configuration in this configuration file:

: {:mailgun-api-key          "your_api_key"
:  :mailgun-login            "postmaster@your.domain.com"
:  :mailgun-password         "your_mailgun_password"
:  :mailgun-from             "your_from_address"
:  :locale                   "en-GB" ; or "fr-FR" etc.
:  :admin-email              "your@email.com"
:  :base-url                 "http://yoursite.com"
:  :return-url               "https://yoursite.com"
:  :port                     3000 ; must be an integer
:  :db-uri                   ""   ; optional
:  :log-file                 ""   ; optional 
:  :warn-every-x-subscribers 10}
   
* Test

Run =lein test= to test the configuration before running the
application.

: ~$ git clone https://github.com/etalab/subscribe
: ~$ cd subscribe/
: ... [Setup your configuration]
: ~$ lein test

* Run

** With =lein run=

: ~$ git clone https://github.com/etalab/subscribe
: ~$ cd subscribe/
: ... [Setup your configuration]
: ~$ lein run

Then go to http://localhost:3000

** With =java -jar=

: ~$ git clone https://github.com/etalab/subscribe
: ~$ cd subscribe/
: ... [Setup your configuration]
: ~$ lein uberjar
: ~$ java -jar target/subscribe-x.x.x-standalone.jar

* Todo

- [ ] Add hero in home page
- [ ] Use buttons for links in home page
- [ ] Add first and last name when subscribing
- [ ] Add unsubscribe link
- [ ] Add authentication tests at init time
- [ ] Better exception handling in config
- [ ] Use antiforgery token
- [ ] Check email formatting
- [ ] Check environment variables format
- [ ] Enhance UI strings (again)
- [ ] Enhance 404 page
- [ ] Don't use wrap-reload in prod
- [ ] Update README.org
- [ ] Allow to configure UI strings

* Support the Clojure ecosystem

If you like Clojure(script), please consider supporting its
development developers by donating to [[https://www.clojuriststogether.org][clojuriststogether.org]].

Thanks!

* License

=subscribe= is licensed under the [[http://www.eclipse.org/legal/epl-v10.html][Eclipse Public License 1.0]], the same
as Clojure.
