#+title: Subscribe

* What it does?

If you manage mailing lists through [[https://www.mailgun.com/][mailgun]], this application displays
a web page with a list of your lists, allowing people to (un)subcribe
from any of them.

* Configure

Add these variable environments:

| Env                   | What it defines     | Fallback value |
|-----------------------+---------------------+----------------|
| SUBSCRIBE_PORT        | The listening port  | 4321           |
| SUBSCRIBE_DB_URI      | The db URI          |                |
| SUBSCRIBE_BASE_URL    |                     |                |
| SUBSCRIBE_ADMIN_EMAIL |                     |                |
| SUBSCRIBE_RETURN_URL  |                     |                |
| MAILGUN_API_KEY       | The mailgun API key | N/A            |
| MAILGUN_FROM          |                     | N/A            |
| MAILGUN_LOGIN         |                     | N/A            |
| MAILGUN_PASSWORD      |                     | N/A            |

* Run

** With =lein run=

: ~$ git clone https://github.com/etalab/subscribe
: ~$ cd subscribe/
: ~$ lein run

Then go to http://localhost:4321.

** With =java -jar=

: ~$ git clone https://github.com/etalab/subscribe
: ~$ cd subscribe/
: ~$ lein uberjar
: ~$ java -jar target/subscribe-x.x.x-standalone.jar

** Changing the environment variables

To use a different port:

: ~$ SUBSCRIBE_PORT="1234" lein run

will run the application at http://localhost:1234

: ~$ SUBSCRIBE_PORT="1234" java -jar subscribe-x.x.x-standalone.jar

will do the same while running the application from a jar file.

* Todo

- Better exception handling in config
- Add authentication tests at init time
- Add first and last name when subscribing
- Add unsubscribe link
- Use antiforgery token
- Check email formatting
- Check environment variables format
- Enhance UI strings (again)
- Enhance 404 page
- Allow to configure UI strings
- Update README.org
- Don't use wrap-reload in prod

* License

=subscribe= is licensed under the [[http://www.eclipse.org/legal/epl-v10.html][Eclipse Public License 1.0]], the same
as Clojure.
